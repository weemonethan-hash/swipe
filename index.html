<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Scroll for Money ‚Äî Online</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;600;800&display=swap" rel="stylesheet">
<style>
  :root{
    --accent:#00ff88; --bg1:linear-gradient(0deg,#ff66cc,#66ccff,#99ff66,#ff9966);
    --glass: rgba(12,12,16,.6);
    --glass-2: rgba(255,255,255,.06);
  }
  html,body{height:100%;margin:0;font-family:Poppins,system-ui,Segoe UI,Roboto,Helvetica,Arial;color:#fff;overflow:hidden}
  body{background:var(--bg1);background-size:100% 1400%;transition:background-position .12s linear}
  #world{position:absolute;inset:0;overflow:hidden;transform:translateZ(0);pointer-events:none}
  .money-block{position:absolute;pointer-events:auto;font-size:42px;padding:8px 12px;border-radius:10px;border:3px solid rgba(255,255,255,.12);background:linear-gradient(180deg,rgba(255,255,255,.02),rgba(255,255,255,.01));cursor:pointer;user-select:none;transition:transform .12s,opacity .2s}
  .money-block:hover{transform:scale(1.15)}
  #hud{
    position:fixed;left:12px;top:12px;width:300px;background:var(--glass);border-radius:12px;padding:12px;backdrop-filter: blur(6px);
    box-shadow:0 6px 24px rgba(0,0,0,.5);z-index:1000;border:1px solid rgba(255,255,255,.06)
  }
  #hud h1{margin:0;font-size:18px;letter-spacing:.6px}
  .stat{display:flex;justify-content:space-between;padding:6px 0;font-weight:600}
  #xpBar{height:10px;background:rgba(255,255,255,.08);border-radius:10px;overflow:hidden;margin-top:6px}
  #xpFill{height:100%;width:0%;background:linear-gradient(90deg,var(--accent),#00ccff);transition:width .2s}
  button,input,select{font-family:inherit}
  button{background:var(--accent);color:#021;border:none;padding:8px 10px;border-radius:8px;cursor:pointer;font-weight:700;margin-top:8px}
  button.ghost{background:transparent;border:1px solid rgba(255,255,255,.08);color:#fff}
  #loginScreen{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:2500}
  .card{width:360px;padding:18px;border-radius:14px;background:rgba(2,6,12,.9);box-shadow:0 10px 40px rgba(0,0,0,.6);border:1px solid rgba(255,255,255,.04)}
  .card input{width:100%;padding:10px;margin-top:8px;border-radius:8px;border:1px solid rgba(255,255,255,.06);background:transparent;color:#fff}
  #topPlayers{margin-top:12px;font-size:14px}
  #controls{margin-top:12px;display:flex;gap:8px;flex-wrap:wrap}
  #centerHUD{position:fixed;right:12px;top:12px;width:320px;background:var(--glass);padding:12px;border-radius:12px;z-index:1000;border:1px solid rgba(255,255,255,.04)}
  .small{font-size:13px;opacity:.9}
  .float{position:fixed;font-weight:800;pointer-events:none;opacity:1;transform:translateY(0);animation:floatUp .9s ease-out forwards;text-shadow:0 0 12px rgba(0,255,136,.6)}
  @keyframes floatUp{to{transform:translateY(-50px);opacity:0}}
  .badge{display:inline-block;padding:4px 8px;border-radius:999px;background:rgba(255,255,255,.03);font-weight:700}
  .eventBanner{position:fixed;left:50%;transform:translateX(-50%);top:82px;background:linear-gradient(90deg,#ffd54d,#ff8a65);padding:8px 14px;border-radius:999px;color:#111;font-weight:900;z-index:1500;box-shadow:0 8px 30px rgba(0,0,0,.4)}
  #leaderboard{margin-top:10px;background:var(--glass-2);padding:8px;border-radius:8px;max-height:170px;overflow:auto}
  .row{display:flex;justify-content:space-between;padding:6px 8px;border-bottom:1px dashed rgba(255,255,255,.03)}
  .smallButton{padding:6px 8px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,.06);cursor:pointer;color:#fff}
  @media (max-width:700px){
    #hud{width:92%;left:4%;top:8px}
    #centerHUD{display:none}
  }

h1 {
  text-align: center;
}
</style>
</head>
<body>

<div id="achievementsMenu" style="position:fixed;left:50%;top:120px;transform:translateX(-50%);width:320px;background:var(--glass);padding:12px;border-radius:12px;z-index:2000;border:1px solid rgba(255,255,255,.04);display:none;">
  <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px">
    <strong>Achievements</strong>
    <button id="closeAchievements" class="smallButton">Close</button>
  </div>
  <div id="achievementsList" class="small"></div>
</div>

<button id="openAchievements" class="smallButton" style="position:fixed;left:50%;bottom:12px;transform:translateX(-50%);z-index:2000;">Achievements</button>


  
<div id="loginScreen">
  <div class="card">
    <h1>Scroll for Money ‚Äî Login / Register</h1>
    <input id="email" placeholder="Email" type="email" />
    <input id="password" placeholder="Password" type="password" />
    <div style="display:flex;gap:8px;margin-top:8px">
      <button id="loginBtn">Login</button>
      <button id="registerBtn" class="ghost">Register</button>
      <button id="guestBtn" class="ghost">Play Guest</button>
    </div>
    <div id="loginMsg" class="small" style="margin-top:8px;color:#ffa">Tip: use any email + password</div>
    <div id="topPlayers" class="small"></div>
  </div>
</div>

<div id="hud" style="display:none">
  <h1>üí∏ Scroll for Money</h1>
  <div class="stat"><span>Money</span><span id="money">0</span></div>
  <div class="stat"><span>Level</span><span id="level">1</span></div>
  <div id="xpBar"><div id="xpFill"></div></div>
  <div class="stat small"><span>Scroll Income</span><span id="scrollIncome">1</span></div>
  <div class="stat small"><span>Block Value</span><span id="blockValue">10</span></div>

  <div id="controls">
    <button id="upBlock">Upgrade Block (¬£100)</button>
    <button id="upScroll" class="ghost">Upgrade Scroll (¬£150)</button>
    <button id="autoScrollBtn" class="ghost">Auto: OFF</button>
    <button id="prestigeBtn" class="ghost">Rebirth (Prestige)</button>
    <button id="dailyBtn" class="ghost">Daily Bonus</button>
    <button id="logoutBtn" class="ghost">Logout</button>
  </div>

  <div id="skins" style="margin-top:8px" class="small">
    Skins:
    <button id="bgSkin1" class="smallButton">Default</button>
    <button id="bgSkin2" class="smallButton">Neon (Lvl4)</button>
  </div>

  <div id="saveStatus" class="small" style="margin-top:8px;opacity:.8">Saved</div>
</div>

<div id="centerHUD" style="display:none">
  <div style="display:flex;justify-content:space-between;align-items:center">
    <div><strong id="displayName">Player</strong><div class="small" id="emailLabel"></div></div>
    <div><span class="badge" id="prestigeMult">x1</span></div>
  </div>

  <div id="leaderboard">
    <div style="font-weight:800;margin-bottom:6px">Leaderboard</div>
    <div id="leadersList" class="small"></div>
    <div style="margin-top:6px"><button id="updateProfile" class="smallButton">Set Display Name</button></div>
  </div>

  <div style="margin-top:12px" class="small">
    Events: <span id="eventStatus">none</span>
  </div>
</div>

<div id="world"></div>
<audio id="ding" src="https://assets.mixkit.co/sfx/preview/mixkit-achievement-bell-600.mp3"></audio>
<audio id="cash" src="https://assets.mixkit.co/sfx/preview/mixkit-epic-cash-register-443.mp3"></audio>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-app.js";
  import {
    getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword,
    onAuthStateChanged, signOut, updateProfile
  } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-auth.js";
  import {
    getFirestore, doc, setDoc, getDoc, collection, query, orderBy, limit, getDocs, serverTimestamp
  } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDj5-jNLG4Ampuc56ygFA8kXScbuVFctBk",
    authDomain: "scroll-3f622.firebaseapp.com",
    projectId: "scroll-3f622",
    storageBucket: "scroll-3f622.firebasestorage.app",
    messagingSenderId: "1012742622451",
    appId: "1:1012742622451:web:e217b4a775975911d93b86"
  };
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  // --- STATE ---
  let money=0, block=10, blockScroll=1, level=1, xp=0;
  let upBC=100, upSC=150;
  let prestigePoints=0, prestigeMultiplier=1;
  let userId=null, userEmail='', displayName='Player';
  let currentBG='bg1', currentBlock='block1';
  let worldY=0, bgY=0, auto=false;
  let lastSave=Date.now();
  let achievements={firstMoney:false,firstUpgrade:false,level10:false,millionaire:false};
  let eventMultiplier=1;
  const world=document.getElementById('world');

  // --- DOM shortcuts ---
  const moneyEl=document.getElementById('money'),
  levelEl=document.getElementById('level'),
  xpFill=document.getElementById('xpFill'),
  scrollIncomeEl=document.getElementById('scrollIncome'),
  blockValueEl=document.getElementById('blockValue'),
  leadersList=document.getElementById('leadersList'),
  eventStatus=document.getElementById('eventStatus'),
  prestigeMultEl=document.getElementById('prestigeMult'),
  displayNameEl=document.getElementById('displayName'),
  emailLabel=document.getElementById('emailLabel'),
  saveStatus=document.getElementById('saveStatus'),
  ding=document.getElementById('ding'),
  cash=document.getElementById('cash');

  // --- HELPERS ---
  function formatNumber(n){
    const abs=Math.abs(n);
    if(abs>=1e12)return(n/1e12).toFixed(2)+'T';
    if(abs>=1e9)return(n/1e9).toFixed(2)+'B';
    if(abs>=1e6)return(n/1e6).toFixed(2)+'M';
    if(abs>=1e3)return(n/1e3).toFixed(2)+'K';
    return n.toFixed(0);
  }
  function xpNeed(){return Math.round(100*Math.pow(1.6,level-1));}
  function playSound(a){try{a.currentTime=0;a.play();}catch{}}
  function floatText(x,y,t,color='var(--accent)'){const el=document.createElement('div');el.className='float';el.style.left=x+'px';el.style.top=y+'px';el.style.color=color;el.textContent=t;document.body.appendChild(el);setTimeout(()=>el.remove(),900);}
  function applyBg(){document.body.style.background=currentBG==='bg2'?'linear-gradient(0deg,#00ffcc,#0066ff,#9900ff)':'linear-gradient(0deg,#ff66cc,#66ccff,#99ff66,#ff9966)';}

  function updateUI(){
    moneyEl.textContent='¬£'+formatNumber(money);
    levelEl.textContent=level;
    xpFill.style.width=Math.min(100,xp/xpNeed()*100)+'%';
    scrollIncomeEl.textContent=formatNumber(blockScroll);
    blockValueEl.textContent=formatNumber(block);
    document.getElementById('upBlock').textContent=`Upgrade Block (¬£${formatNumber(upBC)})`;
    document.getElementById('upScroll').textContent=`Upgrade Scroll (¬£${formatNumber(upSC)})`;
    prestigeMultEl.textContent='x'+prestigeMultiplier;
    displayNameEl.textContent=displayName||'Player';
    emailLabel.textContent=userEmail||'';
    saveStatus.textContent=(Date.now()-lastSave<5000)?'Saved':'Saving...';
    checkAchievements();
  }

  function addXP(a){xp+=a;while(xp>=xpNeed()){xp-=xpNeed();level++;playSound(ding);}updateUI();}
  function addMoney(a){money+=a;updateUI();}

  // --- SAVE / LOAD ---
  async function saveGame(){
    lastSave=Date.now();updateUI();
    if(!userId)return;
    try{
      const ref=doc(db,'users',userId);
      await setDoc(ref,{money,block,blockScroll,level,xp,upBC,upSC,currentBG,currentBlock,prestigePoints,prestigeMultiplier,achievements,displayName,lastUpdated:serverTimestamp()},{merge:true});
      const lbRef=doc(db,'leaderboard',userId);
      await setDoc(lbRef,{uid:userId,displayName,money,updated:serverTimestamp()},{merge:true});
      lastSave=Date.now();updateUI();
    }catch(e){console.error(e);}
  }
  async function loadGame(uid){
    const snap=await getDoc(doc(db,'users',uid));
    const d=snap.data()||{};
    money=d.money??0;block=d.block??10;blockScroll=d.blockScroll??1;level=d.level??1;xp=d.xp??0;
    upBC=d.upBC??100;upSC=d.upSC??150;currentBG=d.currentBG??'bg1';currentBlock=d.currentBlock??'block1';
    prestigePoints=d.prestigePoints??0;prestigeMultiplier=d.prestigeMultiplier??1;
    achievements=d.achievements??achievements;displayName=d.displayName??(userEmail.split('@')[0]);
    applyBg();updateUI();
  }

  // --- ACHIEVEMENTS ---
function checkAchievements(){
  if(!achievements.firstMoney && money >= 100){ achievements.firstMoney = true; floatText(innerWidth/2,innerHeight/2,'üèÜ First ¬£100!'); }
  if(!achievements.firstUpgrade && (block > 10 || blockScroll > 1)){ achievements.firstUpgrade = true; floatText(innerWidth/2,innerHeight/2,'üèÜ First Upgrade!'); }
  if(!achievements.level10 && level >= 10){ achievements.level10 = true; floatText(innerWidth/2,innerHeight/2,'üèÜ Level 10!'); }
  if(!achievements.level20 && level >= 20){ achievements.level20 = true; floatText(innerWidth/2,innerHeight/2,'üèÜ Level 20!'); }
  if(!achievements.millionaire && money >= 1_000_000){ achievements.millionaire = true; floatText(innerWidth/2,innerHeight/2,'üí∞ Millionaire!'); }
  if(!achievements.block100 && block >= 100){ achievements.block100 = true; floatText(innerWidth/2,innerHeight/2,'üèóÔ∏è Block Master!'); }
  if(!achievements.scroll10 && blockScroll >= 10){ achievements.scroll10 = true; floatText(innerWidth/2,innerHeight/2,'üìú Scroll Expert!'); }
  if(!achievements.goldRush && eventMultiplier > 1){ achievements.goldRush = true; floatText(innerWidth/2,innerHeight/2,'üíé Gold Rush Activated!'); }
  if(!achievements.prestige1 && prestigePoints >= 1){ achievements.prestige1 = true; floatText(innerWidth/2,innerHeight/2,'üåü Prestige Achieved!'); }

  if(userId) debounceSave();
  updateAchievementsMenu();
}

function updateAchievementsMenu(){
  const listEl = document.getElementById('achievementsList');
  listEl.innerHTML = '';
  for(const [key, unlocked] of Object.entries(achievements)){
    let label = key.replace(/([A-Z])/g, ' $1').replace(/\b\w/g, l => l.toUpperCase());
    listEl.innerHTML += `<div style="padding:4px 0;">${unlocked ? '‚úÖ' : '‚ùå'} ${label}</div>`;
  }
}


document.getElementById('openAchievements').onclick = () => {
  document.getElementById('achievementsMenu').style.display = 'block';
};

document.getElementById('closeAchievements').onclick = () => {
  document.getElementById('achievementsMenu').style.display = 'none';
};



  // --- GAMEPLAY ---
  function spawnBlock(){
    const b=document.createElement('div');b.className='money-block';b.textContent='üí∞';
    b.style.left=Math.random()*window.innerWidth+'px';b.style.top=Math.random()*window.innerHeight+'px';
    b.addEventListener('click',ev=>{
      const gain=Math.round(block*prestigeMultiplier*eventMultiplier);
      addMoney(gain);playSound(cash);
      floatText(ev.clientX,ev.clientY,'+'+formatNumber(gain),'#0f8');
      world.removeChild(b);
    });
    world.appendChild(b);
    setTimeout(()=>{if(b.parentNode)world.removeChild(b);},3000);
  }
  setInterval(()=>{if(document.getElementById('hud').style.display!=='none')spawnBlock();},2000);

  window.addEventListener('wheel',e=>{
    if(e.deltaY!==0){
      worldY+=e.deltaY;bgY+=e.deltaY*0.02;
      document.body.style.backgroundPosition=`0 ${bgY}px`;
      const income=blockScroll*prestigeMultiplier*eventMultiplier;
      addMoney(income);
      addXP(Math.abs(e.deltaY)*0.01);
    }
  });

  document.getElementById('upBlock').onclick=()=>{
    if(money>=upBC){money-=upBC;block+=5;upBC=Math.round(upBC*1.5);updateUI();debounceSave();checkAchievements();}
  };
  document.getElementById('upScroll').onclick=()=>{
    if(money>=upSC){money-=upSC;blockScroll+=1;upSC=Math.round(upSC*1.6);updateUI();debounceSave();checkAchievements();}
  };
  document.getElementById('prestigeBtn').onclick=()=>{
    const possible=Math.floor(level/10);
    if(possible>0){
      if(confirm(`Rebirth for ${formatNumber(possible)} prestige points?`)){
        prestigePoints+=possible;
        prestigeMultiplier=1+prestigePoints*0.5;
        level=1;xp=0;money=0;block=10;blockScroll=1;
        upBC=100;upSC=150;
        floatText(innerWidth/2,innerHeight/2,'üåü Rebirth! x'+prestigeMultiplier,'gold');
        debounceSave();updateUI();
      }
    } else alert('Need level 10+ to prestige');
  };

  document.getElementById('autoScrollBtn').onclick=()=>{
    auto=!auto;document.getElementById('autoScrollBtn').textContent='Auto: '+(auto?'ON':'OFF');
  };
  setInterval(()=>{if(auto)addMoney(blockScroll*prestigeMultiplier*eventMultiplier);},100);

  document.getElementById('bgSkin1').onclick=()=>{currentBG='bg1';applyBg();debounceSave();}
  document.getElementById('bgSkin2').onclick=()=>{if(level>=4){currentBG='bg2';applyBg();debounceSave();}else alert('Reach level 4 to unlock!');}

  // --- EVENTS ---
  setInterval(()=>{
    if(Math.random()<0.05){ // gold rush
      eventMultiplier=2;eventStatus.textContent='üíé Gold Rush! x2';
      floatText(innerWidth/2,100,'üíé GOLD RUSH!');
      setTimeout(()=>{eventMultiplier=1;eventStatus.textContent='none';},15000);
    }
  },10000);

  // --- SAVE THROTTLE ---
  let saveTimeout;function debounceSave(){clearTimeout(saveTimeout);saveTimeout=setTimeout(saveGame,1500);}
  setInterval(saveGame,15000);

  // --- AUTH ---
  const emailInput=document.getElementById('email'),passInput=document.getElementById('password');
  document.getElementById('loginBtn').onclick=()=>signInWithEmailAndPassword(auth,emailInput.value,passInput.value).catch(()=>alert('Invalid login'));
  document.getElementById('registerBtn').onclick=()=>createUserWithEmailAndPassword(auth,emailInput.value,passInput.value).catch(()=>alert('Register failed'));
  document.getElementById('guestBtn').onclick=()=>{
    userId='guest-'+Date.now();userEmail='guest@guest';document.getElementById('loginScreen').style.display='none';
    document.getElementById('hud').style.display='block';document.getElementById('centerHUD').style.display='block';updateUI();
  };
  document.getElementById('logoutBtn').onclick=()=>signOut(auth);

  onAuthStateChanged(auth,async user=>{
    if(user){userId=user.uid;userEmail=user.email;displayName=user.displayName||userEmail.split('@')[0];
      document.getElementById('loginScreen').style.display='none';
      document.getElementById('hud').style.display='block';
      document.getElementById('centerHUD').style.display='block';
      await loadGame(user.uid);updateUI();loadLeaderboard();
    }else{
      document.getElementById('loginScreen').style.display='flex';
      document.getElementById('hud').style.display='none';
      document.getElementById('centerHUD').style.display='none';
    }
  });

  // --- LEADERBOARD ---
  async function loadLeaderboard(){
    const q=query(collection(db,'leaderboard'),orderBy('money','desc'),limit(5));
    const docs=await getDocs(q);
    leadersList.innerHTML='';
    docs.forEach(docx=>{
      const d=docx.data();
      leadersList.innerHTML+=`<div class="row"><span>${d.displayName}</span><span>¬£${formatNumber(d.money||0)}</span></div>`;
    });
  }

  document.getElementById('updateProfile').onclick=async()=>{
    const name=prompt('Enter display name',displayName);
    if(name){displayName=name;if(auth.currentUser){await updateProfile(auth.currentUser,{displayName:name});}
      debounceSave();updateUI();}
  };

  // --- DAILY BONUS ---
  document.getElementById('dailyBtn').onclick=()=>{
    const key='daily-'+new Date().toDateString();
    if(localStorage.getItem(key))alert('Come back tomorrow!');
    else{
      const bonus=1000*prestigeMultiplier;
      money+=bonus;
      floatText(innerWidth/2,innerHeight/2,'üéÅ Daily ¬£'+formatNumber(bonus));
      localStorage.setItem(key,'yes');
      debounceSave();updateUI();
    }
  };

  // --- AUTO LOOP ---
  setInterval(()=>updateUI(),2000);
</script>
<h1>hello from the dev</h1>
</body>
</html>
